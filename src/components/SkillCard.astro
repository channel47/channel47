---
/**
 * SkillCard Component
 *
 * A premium, high-end card for displaying skills.
 * Design philosophy: Refined, elegant, sophisticated.
 * Conveys expertise and value through careful attention to detail.
 */

interface Props {
  title: string;
  description: string;
  href: string;
  category: string;
  tier: 'free' | 'premium';
  price?: number;
  featured?: boolean;
  tags?: string[];
  class?: string;
}

const {
  title,
  description,
  href,
  category,
  tier,
  price,
  featured = false,
  tags = [],
  class: className,
} = Astro.props;

const categoryLabels: Record<string, string> = {
  'google-ads': 'Google Ads',
  'analytics': 'Analytics',
  'automation': 'Automation',
  'reporting': 'Reporting',
  'optimization': 'Optimization',
  'creative': 'Creative',
  'other': 'Other',
};
---

<a
  href={href}
  class:list={[
    'skill-card',
    { 'skill-card--featured': featured },
    { 'skill-card--premium': tier === 'premium' },
    className,
  ]}
>
  <header class="skill-card__header">
    <span class="skill-card__category">{categoryLabels[category] || category}</span>
    <span class:list={['skill-card__tier', `skill-card__tier--${tier}`]}>
      {tier === 'free' ? 'Free' : price ? `$${price}` : 'Premium'}
    </span>
  </header>

  <div class="skill-card__content">
    <h3 class="skill-card__title">{title}</h3>
    <p class="skill-card__description">{description}</p>
  </div>

  {tags.length > 0 && (
    <div class="skill-card__tags">
      {tags.slice(0, 3).map((tag) => (
        <span class="skill-card__tag">{tag}</span>
      ))}
    </div>
  )}

  <footer class="skill-card__footer">
    <span class="skill-card__cta">
      {tier === 'free' ? 'Get skill' : 'View details'}
      <span class="skill-card__cta-arrow" aria-hidden="true">â†’</span>
    </span>
  </footer>
</a>

<style>
  .skill-card {
    position: relative;
    display: flex;
    flex-direction: column;
    padding: var(--card-padding);
    background: var(--card-premium-bg);
    border: 1px solid var(--card-premium-border);
    border-radius: var(--card-radius);
    text-decoration: none;
    color: inherit;
    -webkit-tap-highlight-color: transparent;
    transition: var(--card-transition);
    overflow: hidden;
  }

  @media (min-width: 640px) {
    .skill-card {
      padding: var(--card-padding-lg);
    }
  }

  /* Subtle inner highlight for depth */
  .skill-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      145deg,
      oklch(100% 0 0 / 0.03) 0%,
      transparent 50%
    );
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--duration-fast) var(--ease-out);
  }

  /* Interactive states */
  .skill-card:hover {
    transform: translateY(var(--card-hover-lift));
    border-color: var(--color-accent);
    box-shadow: var(--card-premium-hover-glow);
  }

  .skill-card:hover::before {
    opacity: 1;
  }

  .skill-card:active {
    transform: scale(var(--card-press-scale));
  }

  .skill-card:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  /* Featured variant */
  .skill-card--featured {
    background: var(--card-premium-featured-bg);
    border-color: oklch(from var(--color-accent) l c h / 0.4);
  }

  .skill-card--featured::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      var(--color-accent) 50%,
      transparent 100%
    );
    opacity: 0.5;
  }

  /* Header */
  .skill-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
  }

  .skill-card__category {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--color-fg-muted);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
  }

  .skill-card__tier {
    flex-shrink: 0;
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    letter-spacing: var(--tracking-wide);
  }

  .skill-card__tier--free {
    background: oklch(from var(--color-success) l c h / 0.12);
    color: var(--color-success);
  }

  .skill-card__tier--premium {
    background: linear-gradient(
      135deg,
      oklch(from var(--color-accent) l c h / 0.15) 0%,
      oklch(from var(--color-accent) calc(l - 0.05) c h / 0.2) 100%
    );
    color: var(--color-accent);
    border: 1px solid oklch(from var(--color-accent) l c h / 0.2);
  }

  /* Content */
  .skill-card__content {
    flex: 1;
    min-height: 0;
  }

  .skill-card__title {
    font-family: var(--font-display);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--color-fg);
    margin: 0 0 var(--space-2) 0;
    line-height: var(--leading-tight);
    letter-spacing: var(--tracking-tight);
  }

  @media (min-width: 640px) {
    .skill-card__title {
      font-size: var(--text-xl);
    }
  }

  .skill-card__description {
    font-family: var(--font-body);
    font-size: var(--text-sm);
    color: var(--color-fg-secondary);
    line-height: var(--leading-relaxed);
    margin: 0;
    /* Clamp for consistent card heights */
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media (min-width: 640px) {
    .skill-card__description {
      -webkit-line-clamp: 4;
    }
  }

  /* Tags */
  .skill-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: var(--space-4);
  }

  .skill-card__tag {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    color: var(--color-fg-muted);
    padding: var(--space-1) var(--space-2);
    background: var(--color-bg);
    border-radius: var(--radius-md);
    letter-spacing: var(--tracking-wide);
  }

  /* Footer */
  .skill-card__footer {
    display: flex;
    align-items: center;
    padding-top: var(--space-4);
    margin-top: var(--space-4);
    border-top: 1px solid var(--color-border-subtle);
  }

  .skill-card__cta {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-display);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--color-accent);
    transition: gap var(--duration-fast) var(--ease-out);
  }

  .skill-card__cta-arrow {
    transition: transform var(--duration-fast) var(--ease-out);
  }

  .skill-card:hover .skill-card__cta-arrow {
    transform: translateX(3px);
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .skill-card,
    .skill-card::before,
    .skill-card__cta-arrow {
      transition: none;
    }

    .skill-card:hover,
    .skill-card:active {
      transform: none;
    }

    .skill-card:hover .skill-card__cta-arrow {
      transform: none;
    }
  }
</style>
