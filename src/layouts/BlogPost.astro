---
// src/layouts/BlogPost.astro
import BaseLayout from './BaseLayout.astro';
import ToolsMentioned from '../components/ToolsMentioned.astro';
import '../styles/components/blog-post.css';

interface Props {
  title: string;
  description: string;
  date: Date;
  tags?: string[];
  toolsUsed?: Array<{
    slug: string;
    source: 'channel47' | 'external';
    installCommand?: string;
  }>;
}

const { title, description, date, tags = [], toolsUsed } = Astro.props;

// Format date for display - uppercase month
const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).toUpperCase();
---

<BaseLayout title={title} description={description}>
  <article class="editorial-article">
    <!-- Hero Area -->
    <div class="article-hero">
      <time class="article-meta" datetime={date.toISOString()}>
        {formattedDate}
      </time>
      <h1 class="article-title">{title}</h1>
      <p class="article-lead">{description}</p>
    </div>

    <!-- Content -->
    <div class="article-content">
      <div class="prose prose-lg max-w-none
        prose-headings:font-semibold prose-headings:text-[var(--color-text)]
        prose-p:text-[var(--color-text)] prose-p:leading-relaxed
        prose-a:text-[var(--color-accent)] prose-a:no-underline hover:prose-a:underline
        prose-code:bg-[var(--color-gray-100)] prose-code:text-[var(--color-text)] prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm
        prose-pre:bg-[var(--color-gray-100)] prose-pre:text-[var(--color-text)] prose-pre:border prose-pre:border-[var(--color-border)] prose-pre:p-6
        prose-blockquote:border-l-[var(--color-accent)] prose-blockquote:pl-4 prose-blockquote:italic
        prose-strong:text-[var(--color-text)] prose-strong:font-semibold
        prose-ul:text-[var(--color-text)] prose-ol:text-[var(--color-text)]
        prose-li:text-[var(--color-text)]">
        <slot />
      </div>
    </div>

    <!-- Tools Mentioned Section -->
    {toolsUsed && toolsUsed.length > 0 && (
      <section class="article-section">
        <ToolsMentioned tools={toolsUsed} />
      </section>
    )}

    <!-- Footer -->
    <footer class="article-footer">
      <a href="/blog">&larr; Back to blog</a>
    </footer>
  </article>
</BaseLayout>
